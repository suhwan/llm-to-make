# /status - 프로젝트 현황 확인

이 스킬은 현재 프로젝트의 진행 상황을 한눈에 보여줍니다.

---

## 사용하는 MCP 도구

| 단계 | MCP 도구 | 용도 |
|------|----------|------|
| Step 1 | `Glob` | 프로젝트 목록 확인 (projects/*/plan.md) |
| Step 2 | `AskUserQuestion` | 프로젝트 선택 (여러 개일 때) |
| Step 3 | `Read` | plan.md 읽기 |
| Step 4 | `mcp__make__scenarios_list` | Make 시나리오 상태 |
| Step 5 | `mcp__airtable__list_tables` | Airtable 테이블 요약 |

---

## 실행 지침

### Step 1: 프로젝트 확인

**Glob 도구 사용**:
```
pattern: "projects/*/plan.md"
```

**분기**:
- 결과 없음 → "프로젝트가 없습니다. /setup을 먼저 실행해주세요." 안내
- 1개 → 자동 선택, Step 3으로
- 여러 개 → Step 2로 (프로젝트 선택)

---

### Step 2: 프로젝트 선택 (여러 개일 때)

**AskUserQuestion 사용**:
```yaml
question: "어떤 프로젝트의 현황을 확인하시겠습니까?"
header: "프로젝트"
options:
  # Glob 결과에서 동적으로 생성
  - label: "suwhan-automation"
    description: "projects/suwhan-automation/"
  - label: "sns-posting"
    description: "projects/sns-posting/"
  - label: "전체 요약"
    description: "모든 프로젝트 현황을 간략히 표시"
```

---

### Step 3: plan.md 분석

**Read 도구 사용**:
```
file_path: projects/{프로젝트명}/plan.md
```

**추출할 정보**:
- 프로젝트 상태 (시작됨/진행중/완료)
- Tasks 섹션의 작업 목록과 상태
- 사용 리소스 (테이블, 연결, 시나리오)
- 변경 이력

---

### Step 4: Make 시나리오 상태 확인

**mcp__make__scenarios_list 호출**:
```
teamId: 2759651  (또는 .env의 MAKE_TEAM_ID)
```

**plan.md에서 추출한 시나리오 ID와 매칭**:
- 시나리오별 활성화 상태 확인
- 마지막 실행 시간 확인

---

### Step 5: 종합 현황 출력

**출력 형식**:
```
📊 프로젝트 현황: {프로젝트명}

┌─────────────────────────────────────────────────┐
│ 📋 기본 정보                                    │
├─────────────────────────────────────────────────┤
│ 생성일: 2026-01-10                              │
│ 상태: 🚀 진행중                                 │
│ Base: suwhan (appzQEgOxUpCYGmk7)                │
└─────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────┐
│ ✅ 완료된 작업                                   │
├─────────────────────────────────────────────────┤
│ • 이미지→영상 시나리오 생성                      │
│ • Generated_Contents 필드 추가                   │
└─────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────┐
│ ⏳ 진행중인 작업                                 │
├─────────────────────────────────────────────────┤
│ • SNS 자동 포스팅 시나리오                       │
│   └─ 현재: Instagram 연결 대기                   │
└─────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────┐
│ 📝 대기중인 작업                                 │
├─────────────────────────────────────────────────┤
│ • 에러 알림 시나리오                             │
│ • 승인 프로세스 구현                             │
└─────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────┐
│ 🎬 Make 시나리오                                 │
├─────────────────────────────────────────────────┤
│ | 이름 | ID | 상태 | 마지막 실행 |               │
│ |------|-----|------|------------|               │
│ | image-to-video | 8436833 | ✅ 활성 | 1시간 전 │
│ | sns-posting | 8437001 | ⏸️ 비활성 | - |        │
└─────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────┐
│ 📊 Airtable 테이블 (8개)                        │
├─────────────────────────────────────────────────┤
│ Models, Content_Requests, Generated_Contents,   │
│ Generated_Video_Contents, Prompt_Templates,     │
│ Gen Models, Model_Personas, SNS_Posts           │
└─────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────┐
│ 🔗 사용 중인 연결                               │
├─────────────────────────────────────────────────┤
│ ✅ Airtable OAuth (12046948)                    │
│ ✅ Google Drive (12046957)                      │
│ ✅ Runware.AI (13479550)                        │
└─────────────────────────────────────────────────┘
```

---

### Step 6: 다음 단계 안내

**출력**:
```
💡 다음 단계 제안:

1. 진행중인 작업 계속하기:
   "SNS 자동 포스팅 시나리오 계속해줘"

2. 새 작업 시작하기:
   /new-scenario

3. 테이블 확인하기:
   /check-tables

4. 시나리오 백업하기:
   /backup
```

---

## 전체 요약 모드

**"전체 요약" 선택 시** (여러 프로젝트가 있을 때):

```
📊 전체 프로젝트 현황

┌─────────────────┬──────────┬─────────┬──────────┐
│ 프로젝트        │ 상태     │ 작업    │ 시나리오 │
├─────────────────┼──────────┼─────────┼──────────┤
│ suwhan-auto     │ 🚀 진행중 │ 3/5 완료 │ 2개      │
│ sns-posting     │ ⏳ 시작됨 │ 0/3 완료 │ 0개      │
│ data-sync       │ ✅ 완료   │ 4/4 완료 │ 1개      │
└─────────────────┴──────────┴─────────┴──────────┘

총 시나리오: 3개 (활성: 2개)
총 작업: 7/12 완료 (58%)
```

---

## 빠른 사용법

사용자가 특정 정보를 요청한 경우:

- "시나리오 상태 보여줘" → Step 4만 실행
- "진행중인 작업 뭐야?" → plan.md에서 Tasks만 추출
- "전체 현황" → 전체 요약 모드

---

## 주의사항

1. **프로젝트 필수**: projects/*/plan.md가 없으면 /setup 안내
2. **plan.md 파싱**: 마크다운 구조에 따라 섹션별 추출
3. **시나리오 매칭**: plan.md의 시나리오 ID와 Make API 결과 매칭
4. **상태 아이콘**:
   - 🚀 진행중
   - ✅ 완료
   - ⏳ 대기중
   - ⏸️ 비활성
   - ❌ 에러
